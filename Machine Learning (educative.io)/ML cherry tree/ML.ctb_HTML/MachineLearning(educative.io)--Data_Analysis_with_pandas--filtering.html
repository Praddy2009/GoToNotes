<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>filtering</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">filtering</h1><br/><br /><h3>Chapter Goals:</h3><br /><br />  • Understand how to filter a DataFrame based on filter conditions<br />  • Write code to filter a dataset of MLB statistics<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><strong>Filter conditions</strong><br /><br />In the Data Manipulation section, we used relation operations on NumPy arrays to create <em>filter</em> conditions.These filter conditions returned boolean arrays, which represented the locations of the elements that pass the filter.<br /><br /><img src="images/6-1.png" alt="images/6-1.png" />  <img src="images/6-2.png" alt="images/6-2.png" /><br /><br />In the code above, we created filter conditions for <code>df</code> based on the columns labeled <code>'playerID'</code>, <code>'HR'</code>, and <code>'teamID'</code>. The boolean Series outputs have <code>True</code> for the rows that pass the filter, and <code>False</code> for the rows that don't.<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><strong>Filters from function</strong><br /><br />Apart from relation operations, pandas provides various functions for creating specific filter conditions. For columns with string values, we can use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.startswith.html">str.startswith</a>, <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.endswith.html">str.endswith</a>, and <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.contains.html">str.contains</a> to filter for specific strings. These functions work the exact same as their namesakes from the Python standard library.<br /><br />The code below shows various examples of string filter conditions. In the final example using <code>str.contains</code>, we prepend the <code>~</code> operation, which negates the filter condition. This means our final filter condition checked for player IDs that <em>do not</em> contain <code>'o'</code>.<br /><br /><img src="images/6-3.png" alt="images/6-3.png" /> <img src="images/6-4.png" alt="images/6-4.png" /><br /><br />We can also create filter conditions that check for values in a specific set, by using the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.isin.html">isin</a> function. The function only takes in one argument, which is a list of values that we want to filter for.<br /><br /><img src="images/6-5.png" alt="images/6-5.png" />  <img src="images/6-6.png" alt="images/6-6.png" /><br /><br />In pandas, when a Series or DataFrame has a missing value at a location, it is represented by <code>NaN</code>. The <code>NaN</code> value in pandas is equivalent to <code>np.nan</code> in NumPy.<br /><br />Similar to Numpy, we cannot use a relation operation to create a filter condition for <code>NaN</code> values. Instead, we use the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.isna.html">isna</a> and <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.notna.html">notna</a> functions.<br /><br /><img src="images/6-7.png" alt="images/6-7.png" />      <img src="images/6-8.png" alt="images/6-8.png" /><br /><br />The <code>isna</code> function returns <code>True</code> in the locations that contain <code>NaN</code> and <code>False</code> in the locations that don't, while the <code>notna</code> function does the opposite.<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><strong>Feature filtering</strong><br /><br />It is really easy to filter a DataFrame's rows based on filter conditions. Similar to direct indexing of a DataFrame, we use square brackets. However, the inside of the square brackets will now contain a filter condition.<br /><br />When applying filter conditions within square brackets, we retrieve the rows of the DataFrame that pass the filter condition (i.e. the rows for which the filter condition is <code>True</code>).<br /><br /><img src="images/6-9.png" alt="images/6-9.png" />   <img src="images/6-10.png" alt="images/6-10.png" /><br /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/6-11.png" alt="images/6-11.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/6-12.png" alt="images/6-12.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/6-13.png" alt="images/6-13.png" /><br /></div></body></html>