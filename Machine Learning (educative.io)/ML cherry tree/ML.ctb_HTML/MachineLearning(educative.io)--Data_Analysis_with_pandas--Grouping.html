<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Grouping</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  
    <script type="text/javascript">
        function in_frame () { try { return window.self !== window.top; } catch (e) { return true; } }
        if (!in_frame()) {
            var page = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
            window.location = 'index.html#' + page;
        }
    </script>
</head>
<body><div class="page"><h1 class="title">Grouping</h1><br/>Chapter Goals:<br />  • Learn how to group DataFrames by columns<br />  • Write code to retrieve home run statistics through DataFrame grouping<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br />Grouping by columns<br />When dealing with large amounts of data, it is usually a good idea to group the data by common categories.<br /><br />For example, we could group a large dataset of MLB player statistics by year, so we can deal with each year's data separately.<br /><br />With pandas DataFrames, we can perform dataset grouping with the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html">groupby</a> function. A common usage of the function is to group a DataFrame by values from a particular column, e.g. a column representing years.<br /><br /><img src="images/11-1.png" alt="images/11-1.png" />                                           <img src="images/11-2.png" alt="images/11-2.png" /><br />The grouping code example produced three DataFrames for the years 2015, 2016, and 2017. The three DataFrame groups are contained in the <code>groups</code> variable, and we used its <code>sum</code> and <code>mean</code> functions to retrieve the total and average per-year statistics.<br /><br />In addition to aggregation functions like <code>sum</code> and <code>mean</code>, we can also filter the groups using <code>filter</code>. The <code>filter</code> function takes in another function as its required argument, which specifies how we want to filter the groups. The output of <code>filter</code> is the concatenation of all the groups that pass the filter.<br /><br /><br /><img src="images/11-3.png" alt="images/11-3.png" />            <img src="images/11-4.png" alt="images/11-4.png" /><br /><br />In the above code example, the lambda function passed into <code>filter</code> returns <code>True</code> if the group (represented as <code>x</code>) represents a year greater than 2015. The output is the concatenation of the 2016 and 2017 groups.<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br />Multiple Columns<br /><br />DataFrame grouping is not just limited to a single column. Rather than passing a single column label into <code>groupby</code>, we can use a list of column labels to specify grouping by multiple columns.<br /><br />Grouping by multiple columns can be useful when multiple data features have many different values.For example, if our dataset consisted of MLB players, grouping by both team and year would give us an organized way to view a team's roster throughout the years.<br /><br /><img src="images/11-5.png" alt="images/11-5.png" />           <img src="images/11-6.png" alt="images/11-6.png" /><br /><br />In the code above, we grouped the MLB data by both year and team, resulting in each group's name being a tuple of year and team. Using the <code>sum</code> function, we obtained the annual total hits for each team.<br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/11-7.png" alt="images/11-7.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/11-8.png" alt="images/11-8.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/11-9.png" alt="images/11-9.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/11-10.png" alt="images/11-10.png" /><br /><br />~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br /><br /><img src="images/11-11.png" alt="images/11-11.png" /></div></body></html>